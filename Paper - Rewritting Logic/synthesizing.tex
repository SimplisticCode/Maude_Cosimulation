\subsection{Complex Scenario}
Complex scenarios subject to step negotiation or algebraic loops is simulated using an iterative algorithm that searches for a correct configuration to simulate the scenario (see XX for more information).
It can be statically checked if a scenario is complex or simple.

% Synthesising the step negotiation
\subsubsection{Step negotiation}
The step negotiation is a search for a step that all SUs accept.
This search requires using a set describing which SUs that are a part of the step negotiation.
The set is calculated using the method from \cite{thrane2021}.


\subsubsection{Algebraic Loops}
Algebraic loops indicating cyclic dependencies in the scenario are also problematic for the rewriting rules since these also generate cyclic dependencies between the rewriting rules. 
We use the approach from \cite{thrane2021} to break the cyclic dependencies by first detecting the non-trivial strongly connected components in a graph we construct from the rules presented in (\simon{Add reference here}), which can be derived from the preconditions in \cref{sc:background}.
When the non-trivial SCCs are detected, we categorize them into two categories feedthrough loops and reactivity loops, which we handle accordingly.

% Synthesising the fixed-point iteration